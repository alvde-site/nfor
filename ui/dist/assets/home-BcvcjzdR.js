import{u as h,j as e,S as m,B as n,a as u,r as d,I as f,d as j,v as g,b as c,D as y,H as C}from"./index-CqMyM57l.js";import{C as b}from"./config-global-Cqss7OMM.js";import{u as v,t as k}from"./users-BPsUgZM-.js";import{L as I,C as L,c as S}from"./Collapse-CCFT60Dk.js";import{L as w}from"./label-wdbPWKtM.js";import{I as p}from"./flag-icon-FgkhQeJT.js";import{C as B}from"./Card-D_rzvbeJ.js";import{C as D}from"./CardHeader-PMu8L_XB.js";import{A}from"./Avatar-BAOI0XfJ.js";import{G as x}from"./Grid2-C23X_e_d.js";import"./listItemTextClasses-CXRqjWo7.js";function W({title:s,subheader:t,list:o,...a}){const l=h(),i=()=>{l("/concert")};return e.jsxs(B,{...a,children:[e.jsx(D,{title:s,subheader:t,sx:{mb:1}}),e.jsx(m,{children:e.jsx(n,{sx:{minWidth:744},children:o.map(r=>e.jsx(E,{item:r},r.id))})}),e.jsx(n,{sx:{p:2,textAlign:"right"},children:e.jsx(u,{size:"small",color:"inherit",endIcon:e.jsx(p,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),onClick:i,children:"Все концерты"})})]})}function E({sx:s,item:t,...o}){const[a,l]=d.useState(!1),i=()=>{l(!a)};return e.jsxs(n,{children:[e.jsxs(n,{sx:{py:2,px:3,gap:2,display:"flex",alignItems:"center",borderBottom:r=>`dashed 1px ${r.vars.palette.divider}`,...s},...o,onClick:i,children:[e.jsx(A,{variant:"rounded",alt:t.title,src:t.coverUrl,sx:{width:48,height:48,flexShrink:0}}),e.jsx(n,{sx:{minWidth:38,flexShrink:0,color:"text.disabled",typography:"caption"},children:e.jsx(f,{"aria-label":"Сообщение",children:t.comments!=="null"&&e.jsx(p,{width:22,icon:"ic:baseline-announcement",sx:{color:"info.main"}})})}),e.jsx(I,{primary:t.title,secondary:t.description,primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{mt:.5,noWrap:!0,component:"span"},sx:{flex:"1 0 auto"}}),e.jsx(n,{sx:{flexShrink:0,color:"text.disabled",typography:"caption"},children:e.jsx(w,{color:t.approved&&"success"||"error",children:t.approved?"Утверждено":"Прогноз"})}),e.jsx(n,{sx:{flexShrink:0,color:"text.disabled",typography:"caption"},children:j(t.concertDate)})]}),t.comments!=="null"&&e.jsx(L,{in:a,timeout:"auto",unmountOnExit:!0,children:e.jsx(n,{sx:{py:2,px:3,gap:2,display:"flex",alignItems:"center",fontStyle:"italic",backgroundColor:r=>`${g(r.vars.palette.info.lighterChannel,.48)}`,borderBottom:r=>`dashed 1px ${r.vars.palette.divider}`,...s},...o,children:t.comments})})]})}c.extend(v);c.extend(k);function H({formattedData:s}){const[t,o]=d.useState([]);return d.useEffect(()=>{function a(){if(s.length){console.log("forrmattedData from analitics",s);const i=S(s).filter(r=>c(c()).startOf("day")<=c(r.concertDate[r.concertDate.length-1]));o(i)}}a()},[s]),e.jsx(y,{maxWidth:"xl",children:e.jsx(x,{container:!0,spacing:3,children:e.jsx(x,{xs:12,children:e.jsx(W,{title:t.slice(0,10).length?"Ближайшие концерты":"В этом сезоне больше нет концертов",list:t.slice(0,10)})})})})}function q({data:s}){return console.log("home",s),e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsxs("title",{children:[" ",`Dashboard - ${b.appName}`]}),e.jsx("meta",{name:"description",content:"Расписание группы тромбонов оркестра НФОР"}),e.jsx("meta",{name:"keywords",content:"НФОР, тромбоны"})]}),e.jsx(H,{formattedData:s})]})}export{q as default};
